<!DOCTYPE html>
<html>
<head>
  <title>Sammy.js example</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.4/sammy.min.js"></script>
  <script type="text/javascript" charset="utf-8">
      ; (function ($) {
          var app = $.sammy(function () {

              this.get('#/', function () {
                  $('#main').text('');
              });

              this.get('#/test', function () {
                  $('#main').text('Hello World');
              });
              this.get('#/dogodki', function (ctx) {
                  $('#main').text('Dogodki');
                  ctx.app.swap('');
                  ctx.$element().append('<h1>inbox</h1>');
              });
              this.get('#/dogodki/:id', function(context) {
                  //ctx.app.swap('');
                  //ctx.$element().append('<h1>' + this.params['id'] + '</h1>');
                  /*$(document).ready(function(){
                    
                      $.getJSON("http://localhost:3000/dogodki/", function(result){
                        $.each(result, function(i, field){
                          //$("div").append(field + " ");
                            ctx.$element().append(result, function(i, field);
                        });
                      });
                  });
                  */
                  $(document).ready(function(){
                    $.getJSON("http://localhost:3000/dogodki/", function(result){
                      $('#main').appendtext(result); 
                    });
                  //$('#main').appendtext(this.params['id']); 
                  });
              });

              this.get('#/compose', function(context) {
                  context.app.swap('');
                  context.$element().append('<h1>say hello to?</h1>'
                  + '<form action="#/compose" method="post">'
                  + '<input type="text" name="to" />'
                  + '<input type="submit" name="submit" />'
                  + '</form>'); 
              });
          });
          $(function () {
              app.run()
          });
      })(jQuery);
  </script>
</head>
<body>
    <div id="main"></div>
    <ul id="link">
      <li><a href="#/test">Click me!</a></li>
      <li><a href="#/">Back</a></li>
    </ul>
</body>
</html>